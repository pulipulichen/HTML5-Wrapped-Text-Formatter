const DEBUG=!1;
let submitToGoogleTrans=function(b){try{var a=b.source.value;a=a.trim();if(""===a)return!1;a=a.split("\ufb00").join("ff");a=a.split("\ufb01").join("fi");do a=a.split("  ").join(" ");while(-1<a.indexOf("  "));do a=a.split("\t").join(" ");while(-1<a.indexOf("\t"));b.replace_fulltype.checked&&(a=a.split("\u2019").join("'"),a=a.split("\u201d").join('"'),a=a.split("\u201c").join('"'));if(b.trim_dash.checked){for(;-1<a.indexOf(" \n");)a=a.split(" \n").join("\n");a=a.split("-\n").join("")}b.trim_nl.checked&&(a=
a.replace(/\n[\u4e00-\u9fa5]/g,function(a){return a.split("\n").join("")}),a=a.split("\n").join(" "));if(b.sentence_nl.checked){a=a.split(". ").join(". \n\n");a=a.split("\u2022 ").join("\n\n\u2022 ");a=a.replace(/p\. \n\n\d/g,function(a){return a.split("\n").join("")});var c=function(a){return a.split("\n").join("")};a=a.replace(/e\.g\. \n\n[^A-Z]/g,c);a=a.replace(/i\.e\. \n\n[^A-Z]/g,c);a=a.replace(/et al\. \n\n[^A-Z]/g,c);a=a.replace(/etc\. \n\n[^A-Z]/g,c);a=a.split("\u2013").join("\u2013 \n\n");
a=a.split("\u3002").join("\u3002 \n\n");a=a.split('." ').join('." \n\n');a=a.split('." \n\n(').join('." (');a=a.split("\u3002\u300d ").join("\u3002\u300d \n\n");a=a.split(".' ").join(".' \n\n");a=a.split("; ").join("; \n\n");a=a.replace(/\d; \n\n/g,function(a){return a.split("\n").join("")});a=a.split("\uff1b ").join("\uff1b \n\n");a=_googleTransUtils.str_replace("\uff1b","\uff1b\n\n",a);a=_googleTransUtils.str_replace("\uff08 "," (",a);a=_googleTransUtils.str_replace("  ( "," (",a);a=_googleTransUtils.str_replace(" \uff09",
") ",a);a=_googleTransUtils.str_replace(")  ",") ",a);a=a.split("\n ").join("\n");a=a.replace(/[0-9]+\. \n\n[A-Z]/g,function(a){return"\n\n"+a.split("\n").join("")})}b.trim_citation.checked&&(a=a.replace(/\n\d+$/g,""),a=a.replace(/\n\d+ /g,"\n"));for(;-1<a.indexOf("  ");)a=a.split("  ").join(" ");for(;-1<a.indexOf("\n ");)a=a.split("\n ").join("\n");for(;-1<a.indexOf(". \n\n.");)a=a.split(". \n\n.").join("..");for(;-1<a.indexOf("\n\n\n\n");)a=a.split("\n\n\n\n").join("\n\n");a=a.replace(/[A-Z]\. \n\n/g,
function(a){return a.split("\n").join("")});a=$.trim(a);if("submit_authors"===$(b).attr("submit_type")){-1<a.indexOf(" (")&&(a=a.substr(0,a.indexOf(" (")).trim());a=a.split(" and ").join(", ");var d=a.split(",");c=[];console.log(d);let b=2;1===d.length%2&&(b=1);for(let a=0,h=d.length;a<h;a+=b){let e=d[a];2===b&&(e=e+", "+d[a+1]);e=e.split("&").join("");let h=e.indexOf(", ");if(-1<h){let a=e.substr(0,h).trim(),b=e.slice(h+1,e.length).trim();e=a+"\t"+b}e=e.trim();c.push(e)}a=c.join("\n")}b.trim_citation.checked&&
(a=a.replace(/\[.*?\]/g,""),a=a.replace(/\(.*?\)/g,""),a=a.replace(/\{.*?\}/g,""));d=a;a=encodeURIComponent(a);var f="https://translate.google.com.tw/#"+b.source_lang.value+"/"+b.target_lang.value+"/"+a,q=b.output_style.value;if(b.test_output.checked){var u=$(".google_trans_20140526 .test-output").show(),k=$("<div class='test-div panel panel-success'></div>").prependTo(u),n=new Date,l=n.getHours(),g=n.getMinutes(),v=n.getSeconds();a=d;a=_googleTransUtils.str_replace("\n"," ",a);$("<div class='animated panel-heading togglable'></div>").html('<span class="glyphicon glyphicon-chevron-up" style="float:right"></span><span class="glyphicon glyphicon-chevron-down" style="float:right"></span><div class=\'heading-text\'><strong>'+
l+":"+g+":"+v+"</strong> "+a+"</div> ").click(function(){_googleTransUtils.toggle_panel(this)}).appendTo(k);_googleTransUtils.toggle_panel($(".google_trans_20140526 .input-div .panel-heading.togglable"));let c=$('<div style="display: inline-block; text-align:center"></div>'),f=$('<select class="form-control"></select>');l=[["zh-TW","\u6b63\u9ad4\u4e2d\u6587"],["zh-CN","\u7b80\u4f53\u4e2d\u6587"],["ja","\u65e5\u672c\u8a9e"],["en","English"]];for(g=0;g<l.length;g++)f.append('<option value="'+l[g][0]+
'">'+l[g][1]+"</option>");f.attr("target_lang",b.target_lang.value).val(b.target_lang.value).change(function(){let a=$(this).parents(".test-div").find("textarea.source").val();$(this).parents(".test-div").find("textarea.note").addClass("wait-trans");var b=$("#transTempIframe")[0];b=b.contentWindow?b.contentWindow:b.contentDocument.defaultView;let d=$(b.document.body);d.find("#source").html(a);d.find("#originalSource").val(a);b.setGoogleTransCookie(this.value);b.googleTranslateElementInit()}).appendTo(c);
"submit_authors"!==$(b).attr("submit_type")&&$('<button type="button" class="btn btn-success btn-block"></button>').html("\u8907\u88fd").click(function(){""===document.cookie&&(document.cookie="googtrans=/en/zh-TW");let a=[];$(this).parents(".test-div:first").find("textarea").each((b,d)=>{a.push(d.value)});a=a.join("\n\n").trim();if(""!==a){var b=$("#copyInput");0===b.length&&(b=$('<textarea id="copyInput" style="position:absolute; top: -999px"></textarea>').appendTo("body"));b.val(a);b.eq(0).select();
document.execCommand("copy")}}).appendTo(c);var m=$("<textarea class='animated source original panel-body'></textarea>").val(d).click(function(){this.select()}).appendTo(k),r=$("<textarea class='animated source trans panel-body note loading'></textarea>").click(function(){this.select()}).appendTo(k);"submit_authors"===$(b).attr("submit_type")&&k.addClass("submit_authors");c.appendTo(k);var p=function(){$(".input-div .panel-body").slideUp()};$(function(){m.autosize();r.autosize();m.focus();m.click();
m.click(p);r.click(p);c.click(p);$(".google-trans-title").hide()});b.window_open_output.checked&&(setTimeout(()=>f.change(),500),window.scrollTo(0,0))}else if("blank"===q)window.open(f,"_blank");else if("iframe"===q){var w=b.subject.value,x=(new Date).getTime();_googleTransUtils.create_iframe(f,x+" "+w).prependTo(".google_trans_20140526 .output")}}catch(t){console.log(t)}$(b.source).val("");return!1};
$(()=>{$("#submitToGoogleTransForm").submit(function(b){return submitToGoogleTrans(this,b)});$("#submitToGoogleTransForm :submit").click(function(){$("#submitToGoogleTransForm").attr("submit_type",this.name)})});
var _googleTransUtils={str_replace:function(b,a,c,d){return c.split(b).join(a)},trim_nl:function(b){return this.str_replace("\n","",b)},trim_nl_dash:function(b){return this.str_replace("-\n","",b)},toggle_panel:function(b,a){b=$(b);var c=b.nextAll();void 0===a&&(a=0<c.filter(":visible").length);a?c.slideUp(function(){b.addClass("heading_hidden")}):c.slideDown(function(){b.removeClass("heading_hidden")})},create_iframe:function(b,a){var c=$("<div></div>").addClass("panel panel-success"),d=$("<div></div>").addClass("panel-heading togglable").appendTo(c).click(function(){_googleTransUtils.toggle_panel(this)});
$("<div></div>").addClass("panel-title").html(a).appendTo(d);a=$("<div></div>").addClass("panel-body").appendTo(c);$('<iframe src="'+b+'&output=embed" class="iframe" />').appendTo(a);return c}};
$(function(){var b=$(".input-textarea").focus(),a=function(){var a=window.innerHeight;a-=300;30>a&&(a=30);b.height(a)};a();$(window).resize(function(){a()});b.keydown(function(a){a.ctrlKey&&13===a.keyCode?$(".google_trans_20140526 form .submit_trans").click():a.altKey&&13===a.keyCode&&$(".google_trans_20140526 form .submit_authors").click()});let c;$(window).blur(function(){!0!==DEBUG&&(c=setTimeout(()=>{var a=$(".input-div .panel-heading.togglable");_googleTransUtils.toggle_panel(a,!1);a=$('.input-div [name="source"]');
var b=a.val();""!==b&&"\n"!==b.substr(b.length-1,1)&&a.val(b+"\n")},3E3))});$(window).focus(()=>{clearTimeout(c)});$(".output-container .page-header").click(function(){$(".input-div .panel-heading.togglable").click()})});$(()=>{!0===DEBUG&&$(".submit_trans").click()});